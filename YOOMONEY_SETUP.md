# üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooMoney –¥–ª—è –±–æ—Ç–∞

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ Secret Key

1. **–ó–∞–π–¥–∏—Ç–µ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç YooMoney:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://yoomoney.ru/
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç

2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤":**
   - –í –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ "–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤"
   - –ò–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞–ø—Ä—è–º—É—é: https://yoomoney.ru/developers

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
     - **–ù–∞–∑–≤–∞–Ω–∏–µ:** Elysia AI Bot
     - **–û–ø–∏—Å–∞–Ω–∏–µ:** Telegram –±–æ—Ç –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –ø–æ–¥—Ä—É–≥–∏
     - **Redirect URI:** `https://t.me/elysia_ai_bot`

4. **–ü–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏:**
   - –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
     - **Client ID:** `906B63FC5E6BD7825970D5ADFAF70203BE667B5359729D1162A7E33D0CFF38A1` ‚úÖ
     - **Secret Key:** `–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á` ‚ùå (–Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Webhook URL

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ webhook —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   cd bot
   python3 webhook_server.py
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ngrok
   brew install ngrok  # macOS
   # –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Å https://ngrok.com/
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç—É–Ω–Ω–µ–ª—å
   ngrok http 8080
   ```

3. **–ü–æ–ª—É—á–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π URL:**
   - ngrok –ø–æ–∫–∞–∂–µ—Ç URL –≤–∏–¥–∞: `https://abc123.ngrok.io`
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `https://abc123.ngrok.io/webhook/yoomoney`

#### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

1. **–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ**
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ SSL**
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL:** `https://–≤–∞—à-–¥–æ–º–µ–Ω.com/webhook/yoomoney`

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `config.env`:

```env
# YooMoney Configuration
YOOMONEY_CLIENT_ID=906B63FC5E6BD7825970D5ADFAF70203BE667B5359729D1162A7E33D0CFF38A1
YOOMONEY_SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–æ—Ç_yoomoney
YOOMONEY_WEBHOOK_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.com/webhook/yoomoney
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ YooMoney

1. **–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   - –£–∫–∞–∂–∏—Ç–µ **Webhook URL**
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–±—ã—Ç–∏—è: `payment.succeeded`, `payment.canceled`
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ webhook —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   python3 webhook_server.py
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   python3 main.py
   ```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–ª–∞—Ç–µ–∂:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
   - –ù–∞–∂–º–∏—Ç–µ "üõí –ú–∞–≥–∞–∑–∏–Ω"
   - –í—ã–±–µ—Ä–∏—Ç–µ "‚≠ê –ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞"
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É:
```bash
python3 -c "
from config import config
print(f'Client ID: {config.yoomoney.client_id}')
print(f'Secret Key: {\"‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\" if config.yoomoney.secret_key != \"your_secret_key_here\" else \"‚ùå –ù–ï —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω\"}')
print(f'Webhook URL: {config.yoomoney.webhook_url}')
"
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ webhook —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ YooMoney
